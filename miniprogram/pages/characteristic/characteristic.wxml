<van-nav-bar title="Characteristic" fixed left-arrow bind:click-left="onClickLeft">
  <image slot="left" src="/assets/icon/back.png" mode="" style="height: 40rpx;width: 20rpx;" />
</van-nav-bar>
<van-notify id="van-notify" />
<van-cell title="{{currentCharacteristic.name}}" label="{{currentCharacteristic.name === currentCharacteristic.shortCharacteristicUUID ? '' : currentCharacteristic.shortCharacteristicUUID}}" value="{{connected ? '已连接' : '已断开'}}" value-class="{{connected ? 'connected ' : 'disconnected'}}" />

<van-cell title="Device" label="{{currentDevice.currentDevice.name || 'N/A'}}" />
<van-cell title="Service UUID" label="{{currentCharacteristic.shortServiceUUID}}" />

<!-- 编码设置 -->
<van-cell center title="Type">
  <select slot="right-icon" nowId="{{currentTypeOption.id}}" nameList="{{valueTypeOptions}}" nowName="{{currentTypeOption.name}}" placeholder="" bind:handleChange="dropdownItemChange"></select>
</van-cell>

<!-- 读属性 -->
<van-cell-group title="Read Value" wx:if="{{readable}}">
  <van-cell center title-class="operate-btn">
    <view slot="title">
      <button data-type="read" bind:tap="operateBtnTap" size="mini" type="primary">Read Again</button>
    </view>
  </van-cell>

  <!-- 读取历史 -->
  <van-cell label-class="characteristic-value" wx:key="index" wx:for="{{currentCharacteristicReadOrNotifyCache}}" title="{{item.time}}" label="{{item.value}}" />
</van-cell-group>


<!-- 写属性 -->
<van-cell-group title="Write" wx:if="{{writable}}">
  <van-cell center title-class="operate-btn">
    <view slot="title">
      <button data-type="write" bind:tap="operateBtnTap" size="mini" type="primary">Write new value</button>
    </view>
  </van-cell>

  <!-- 写入历史 -->
  <van-cell label-class="characteristic-value" wx:key="index" wx:for="{{currentCharacteristicWriteCache}}" title="{{item.time}}" label="{{item.value}}" />
  <van-cell wx:key="index" wx:if="{{currentCharacteristicWriteCache.length === 0}}" title="Written values will appear hear" />
</van-cell-group>

<!-- 通知 -->
<van-cell-group title="Notified Values" wx:if="{{notify}}">
  <van-cell center title-class="operate-btn">
    <view slot="title">
      <button data-type="notify" bind:tap="operateBtnTap" size="mini" type="primary">{{currentCharacteristicSubscribed? "Unsubscribe":"Subscribe"}}</button>
    </view>
  </van-cell>

  <!-- 通知历史 -->
  <van-cell label-class="characteristic-value" wx:key="index" wx:for="{{currentCharacteristicReadOrNotifyCache}}" title="{{item.time}}" label="{{item.value}}" />
  <van-cell wx:key="index" wx:if="{{currentCharacteristicReadOrNotifyCache.length === 0}}" title="Notified values will appear hear" />
</van-cell-group>


<!-- 属性列表 -->
<van-cell-group title="Properties">
  <van-cell center wx:key="index" wx:for="{{currentCharacteristicProperties}}" title="{{item.title}}" label="{{item.label}}">
    <image slot="icon" src="/assets/icon/{{item.icon}}" class="property-icon" />
  </van-cell>
</van-cell-group>